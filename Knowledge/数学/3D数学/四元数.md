# 1. 四元数
## 1.1. 基础定义
四元数用一个旋转角度和一个旋转轴来表示, 
旋转轴用$n = [n_x \, n_y \, n_z]$表示
旋转角用$\theta$表示
则四元数可以表示为:

$$q=[\sin(\frac \theta 2)n_x \, \quad \sin(\frac \theta 2)n_y \, \quad \sin(\frac \theta 2)n_z \,  \quad\cos(\frac \theta 2)]$$

## 1.2. 四元数基本运算
### 1.2.1. 负四元数
每一位直接取负即可

$$-q = -[(x, y, z), w] = [(-x, -y, -z), -w]$$

### 1.2.2. 单位四元数
定义单位四元数为:

$$[(0, 0, 0), 1]$$

### 1.2.3. 四元数的模
$$\Vert q \Vert = {\sqrt {x^2 + y^2 + z^2 + w^2}}$$

### 1.2.4. 四元数的共轭
$$q^* = [(-x, -y, -z), w]$$

### 1.2.5. 四元数的逆
$$q^{-1} = {q^* \over \Vert q \Vert}$$

### 1.2.6. 四元数乘法
#### 1.2.6.1. 叉乘
标准形式为:

$$[v_1, w_1] \times [v_2, w_2] = [w_1w_2 - v_1 \cdot v_2, \quad w_1v_2 + w_2v_1 + v_2 \times v_1]$$
书中使用的形式:(仅将最后的叉乘换为了点乘)

$$[v_1, w_1] \times [v_2, w_2] = [w_1w_2 - v_1 \cdot v_2, \quad w_1v_2 + w_2v_1 + v_2 \cdot v_1]$$

#### 1.2.6.2. 点乘
$$q_1 \cdot q_2 = w_1w2 + x_1x_2 + y_1y_2 + z_1z_2$$

#### 1.2.6.3. 减法
减法的定义建立在乘法的基础上
这里乘法都指叉乘, 并省略叉乘符号
减法定义为从一个四元数到另一个四元数的位移
即: $ad = b$
上面表示从a旋转到b
经过转化后, a和b的差为$d = a^{-1}b$

### 1.2.7. 对数

### 1.2.8. 指数
### 1.2.9. 标量乘法
### 1.2.10. 幂运算

## 1.3. 四元数的性质
1, 乘法(叉乘)满足结合律, 但不满足交换律

$$(ab)c = a(bc)$$
$$ab \neq ba$$

2, 乘积的模等于模的乘积

$$\Vert q_1 \Vert \Vert q_2 \Vert = \Vert q_1 q_2 \Vert$$

3, 四元数乘积的逆等于各个四元数的逆以相反顺序相乘

$$ (ab)^{-1} = b^{-1} a^{-1}$$

## 1.4. 让向量旋转
假定向量为$(x, y, z)$
将其拓展为四元数, 可以表示为$p = [(x, y, z), 0]$
让p沿着$n = (n_x, n_y, n_z)$旋转$\theta$角
定义q为n和$\theta$表示的四元数
则旋转后的向量(四元数)如下
$\hat p = qpq^{-1}$

如果再进行r旋转, 则可表示为:
$\hat p = (rq)p(q^{-1} r^{-1}) = (rq)p(rq)^{-1}$ 

## 1.5. 四元数差值

## 1.6. 四元数样条

